<!--pages/index.wxml - 海龟汤首页-->
<view class="page {{swiping ? 'swiping' : ''}}" style="{{gradientStyle ? '--dynamic-gradient: ' + gradientStyle : ''}}">
  <!-- 噪点效果 -->
  <view class="noise-overlay"></view>  <!-- 导航栏 -->
  <nav-bar
    isTabBarPage="{{true}}"
    bind:refreshPage="onRefreshHome"
  />

  <view class="container"
    bindtouchstart="handleTouchStart"
    bindtouchmove="handleTouchMove"
    bindtouchend="handleTouchEnd">

    <!-- 汤面显示区域 -->
    <view class="soup-display-wrapper">
      <soup-display
        id="soupDisplay"
        swipeDirection="{{swipeDirection}}"
        class="soup-display-component"
        bind:swipe="handleSoupSwipe"
      ></soup-display>
      
      <!-- 交互底部组件 -->
      <interaction-footer
        id="interactionFooter"
        bind:showLogin="onShowLogin"
      ></interaction-footer>
    </view>

    <!-- 按钮区域 -->
    <view class="button-container show-buttons">
      <!-- 开始喝汤按钮 - 使用自定义组件 -->
      <start-soup-button
        text="开始喝汤"
        bind:tap="onStartChat"
      ></start-soup-button>
    </view>

    <!-- 恐怖元素 - 随机闪烁的微光点 -->
    <view class="horror-flicker"></view>
    <view class="horror-flicker"></view>
    <view class="horror-flicker"></view>
    <view class="horror-flicker"></view>
    <view class="horror-flicker"></view>
    <view class="horror-flicker"></view>
  </view>

  <!-- 新用户引导层组件 -->
  <guide-overlay
    show="{{showGuide}}"
    bind:close="onCloseGuide">
  </guide-overlay>
  <!-- 登录弹窗 - 通过事件触发显示 -->
  <login-popup 
      id="loginPopup"
  />

</view>