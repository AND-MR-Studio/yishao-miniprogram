<!--components/progress-ring/progress-ring.wxml-->
<view class="progress-ring-container" style="width: {{size}}rpx; height: {{size}}rpx;">
  <!-- SVG环形进度条 -->
  <svg class="progress-ring" width="{{size}}" height="{{size}}" viewBox="0 0 {{size}} {{size}}">
    <!-- 定义渐变 -->
    <defs>
      <linearGradient id="progressGradient" x1="0%" y1="0%" x2="100%" y2="0%">
        <stop offset="0%" stop-color="#29D26D" />
        <stop offset="100%" stop-color="#8C5BFF" />
      </linearGradient>
    </defs>

    <!-- 背景圆环 -->
    <circle
      class="progress-ring-circle-bg"
      stroke-width="{{strokeWidth}}"
      fill="transparent"
      r="{{radius}}"
      cx="{{size/2}}"
      cy="{{size/2}}"
    />

    <!-- 进度圆环 -->
    <circle
      class="progress-ring-circle"
      stroke="url(#progressGradient)"
      stroke-width="{{strokeWidth}}"
      fill="transparent"
      r="{{radius}}"
      cx="{{size/2}}"
      cy="{{size/2}}"
      stroke-dasharray="{{circumference}}"
      stroke-dashoffset="{{dashOffset}}"
      transform="rotate(-90, {{size/2}}, {{size/2}})"
    />
  </svg>

  <!-- 粒子效果 -->
  <view class="particles-container" wx:if="{{showParticles}}">
    <view
      wx:for="{{particles}}"
      wx:key="id"
      class="particle"
      style="left: {{size/2 + item.x}}rpx; top: {{size/2 + item.y}}rpx; width: {{item.size}}rpx; height: {{item.size}}rpx; animation-duration: {{item.duration}}ms;"
    ></view>
  </view>

  <!-- 内容插槽 -->
  <view class="progress-ring-content">
    <slot></slot>
  </view>
</view>
